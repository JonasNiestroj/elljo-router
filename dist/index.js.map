{"version":3,"file":"index.js","sources":["../src/components/router.jo","../src/router/router.js"],"sourcesContent":["<div :id=\"id\"></div>\n\n<script>\nimport { afterRender } from '@elljo/runtime'\n\nconst router = window.__elljo_router__\n\nif(!router) {\n  // TODO: Add better error\n  console.error(\"no router\")\n}\nconst id = Math.random().toString(36).substring(9)\nlet currentRoute = null\n\nconst routeChanged = (route) => {\n  console.log(route)\n  if(currentRoute && currentRoute !== route) {\n    currentRoute.teardown()\n  }\n  if(route) {\n    currentRoute = route\n    window.__elljo__.mount(route.component, '#' + id)\n  }\n}\n\nrouter.addRouteChangedCallback(routeChanged)\n\nconst initRoute = () => {\n  routeChanged(router.getRouteFromPath(document.location.pathname))\n}\n\nafterRender(initRoute)\n\n</script>","import RouterComponent from '../components/router.jo'\n\nexport let currentRoute = null\n\nexport default function Router(routes) {\n\n  const routeChangedCallbacks = []\n\n  this.addRouteChangedCallback = (callback) => {\n    routeChangedCallbacks.push(callback)\n  }\n\n  this.getRouteFromPath = (path) => {\n    for (let route of routes) {\n      if (route.url === path) {\n        return route\n      }\n    }\n    return null\n  }\n  \n  window.addEventListener('popstate', () => {\n    this.routeChangedCallbacks.forEach(callback => {\n      let newRoute = this.getRouteFromPath(document.location.pathname)\n      currentRoute = newRoute\n      callback(newRoute)\n    })\n  })\n\n  let newRoute = this.getRouteFromPath(document.location.pathname)\n  currentRoute = newRoute\n  \n  window.__elljo_router__ = this\n}\n\nRouter.prototype.init = (elljo) => {\n  elljo.addComponent('Router', RouterComponent)\n}"],"names":["RouterComponent"],"mappings":";;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AA/BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEU,IAAC,YAAY,GAAG,KAAI;AAC9B;AACe,SAAS,MAAM,CAAC,MAAM,EAAE;AAGvC;AACA,EAAE,IAAI,CAAC,uBAAuB,GAAG,CAAC,QAAQ,KAAK;AAE/C,IAAG;AACH;AACA,EAAE,IAAI,CAAC,gBAAgB,GAAG,CAAC,IAAI,KAAK;AACpC,IAAI,KAAK,IAAI,KAAK,IAAI,MAAM,EAAE;AAC9B,MAAM,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,EAAE;AAC9B,QAAQ,OAAO,KAAK;AACpB,OAAO;AACP,KAAK;AACL,IAAI,OAAO,IAAI;AACf,IAAG;AACH;AACA,EAAE,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,MAAM;AAC5C,IAAI,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,QAAQ,IAAI;AACnD,MAAM,IAAI,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAC;AACtE,MAAM,YAAY,GAAG,SAAQ;AAC7B,MAAM,QAAQ,CAAC,QAAQ,EAAC;AACxB,KAAK,EAAC;AACN,GAAG,EAAC;AACJ;AACA,EAAE,IAAI,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAC;AAClE,EAAE,YAAY,GAAG,SAAQ;AACzB;AACA,EAAE,MAAM,CAAC,gBAAgB,GAAG,KAAI;AAChC,CAAC;AACD;AACA,MAAM,CAAC,SAAS,CAAC,IAAI,GAAG,CAAC,KAAK,KAAK;AACnC,EAAE,KAAK,CAAC,YAAY,CAAC,QAAQ,EAAEA,MAAe,EAAC;AAC/C;;;;"}